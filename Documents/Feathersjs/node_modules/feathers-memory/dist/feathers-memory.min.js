!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.memory=t():(e.feathers=e.feathers||{},e.feathers.memory=t())}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.stripSlashes=function(e){return e.replace(/^(\/*)|(\/*)$/g,"")};var i=t._={each:function(e,t){e&&"function"==typeof e.forEach?e.forEach(t):i.isObject(e)&&Object.keys(e).forEach(function(r){return t(e[r],r)})},some:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).some(function(e){var r=n(e,2),o=r[0],i=r[1];return t(o,i)})},every:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).every(function(e){var r=n(e,2),o=r[0],i=r[1];return t(o,i)})},keys:function(e){return Object.keys(e)},values:function(e){return i.keys(e).map(function(t){return e[t]})},isMatch:function(e,t){return i.keys(t).every(function(r){return e[r]===t[r]})},isEmpty:function(e){return 0===i.keys(e).length},isObject:function(e){return"object"===(void 0===e?"undefined":r(e))&&!Array.isArray(e)&&null!==e},extend:function(){return Object.assign.apply(Object,arguments)},omit:function(e){for(var t=i.extend({},e),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach(function(e){return delete t[e]}),t},pick:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce(function(t,r){return void 0!==e[r]&&(t[r]=e[r]),t},{})},merge:function(e,t){return i.isObject(e)&&i.isObject(t)&&Object.keys(t).forEach(function(r){i.isObject(t[r])?(e[r]||Object.assign(e,o({},r,{})),i.merge(e[r],t[r])):Object.assign(e,o({},r,t[r]))}),e}};t.select=function(e){for(var t=e&&e.query&&e.query.$select,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];Array.isArray(t)&&n.length&&t.push.apply(t,n);var u=function(e){return Array.isArray(t)?i.pick.apply(i,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))):e};return function(e){return Array.isArray(e)?e.map(u):u(e)}},t.isPromise=function(e){return i.isObject(e)&&"function"==typeof e.then},t.makeUrl=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="function"==typeof n.get?n.get.bind(n):function(){},i=o("env")||"production",u=o("host")||e.env.HOST_NAME||"localhost",a="development"===i||"test"===i||void 0===i?"http":"https",c=o("port")||e.env.PORT||3030;return r=r||"",a+"://"+u+("development"===i||"test"===i||void 0===i?":"+c:"")+"/"+t.stripSlashes(r)},t.compareNSB=function(e,t){return e<t?-1:e>t?1:0},t.compareArrays=function(e,r){var n,o;for(n=0;n<Math.min(e.length,r.length);n+=1)if(0!==(o=t.compare(e[n],r[n])))return o;return t.compareNSB(e.length,r.length)},t.compare=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.compareNSB,o=t,i=o.compareNSB,u=o.compare,a=o.compareArrays;if(void 0===e)return void 0===r?0:-1;if(void 0===r)return void 0===e?0:1;if(null===e)return null===r?0:-1;if(null===r)return null===e?0:1;if("number"==typeof e)return"number"==typeof r?i(e,r):-1;if("number"==typeof r)return"number"==typeof e?i(e,r):1;if("string"==typeof e)return"string"==typeof r?n(e,r):-1;if("string"==typeof r)return"string"==typeof e?n(e,r):1;if("boolean"==typeof e)return"boolean"==typeof r?i(e,r):-1;if("boolean"==typeof r)return"boolean"==typeof e?i(e,r):1;if(e instanceof Date)return r instanceof Date?i(e.getTime(),r.getTime()):-1;if(r instanceof Date)return e instanceof Date?i(e.getTime(),r.getTime()):1;if(Array.isArray(e))return Array.isArray(r)?a(e,r):-1;if(Array.isArray(r))return Array.isArray(e)?a(e,r):1;for(var c=Object.keys(e).sort(),s=Object.keys(r).sort(),f=0,l=0;l<Math.min(c.length,s.length);l+=1)if(0!==(f=u(e[c[l]],r[s[l]])))return f;return i(c.length,s.length)},t.sorter=function(e){var r=Object.keys(e).map(function(t){return{key:t,direction:e[t]}});return function(e,n){for(var o=void 0,i=0;i<r.length;i++){var u=r[i];if(0!=(o=u.direction*t.compare(e[u.key],n[u.key])))return o}return 0}}}).call(this,r(1))},function(e,t,r){"use strict";var n,o,i=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:u}catch(e){n=u}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s,f=[],l=!1,p=-1;function d(){l&&s&&(l=!1,s.length?f=s.concat(f):p=-1,f.length&&y())}function y(){if(!l){var e=c(d);l=!0;for(var t=f.length;t;){for(s=f,f=[];++p<t;)s&&s[p].run();p=-1,t=f.length}s=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new h(e,t)),1!==f.length||l||c(y)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(3),u=r(4),a=r(8),c=a.sorter,s=a.select,f=a.filterQuery,l=a._,p=r(12),d=function(){var e=s.apply(void 0,arguments);return function(t){return e(JSON.parse(JSON.stringify(t)))}},y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.paginate=t.paginate||{},this._id=this.id=t.idField||t.id||"id",this._uId=t.startId||0,this.store=t.store||{},this.events=t.events||[],this._matcher=t.matcher,this._sorter=t.sorter||c}return n(e,[{key:"extend",value:function(e){return i.extend(e,this)}},{key:"_find",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:f)(e.query||{}),r=t.query,n=t.filters,o=d(e),i=l.values(this.store),u=(i=this._matcher?i.filter(this._matcher(r)):p(r,i)).length;return n.$sort&&i.sort(this._sorter(n.$sort)),n.$skip&&(i=i.slice(n.$skip)),void 0!==n.$limit&&(i=i.slice(0,n.$limit)),Promise.resolve({total:u,limit:n.$limit,skip:n.$skip||0,data:o(i)})}},{key:"find",value:function(e){var t=void 0!==e.paginate?e.paginate:this.paginate,r=this._find(e,function(e){return f(e,t)});return t&&t.default?r:r.then(function(e){return e.data})}},{key:"get",value:function(e,t){return e in this.store?Promise.resolve(this.store[e]).then(d(t,this.id)):Promise.reject(new u.NotFound("No record found for id '"+e+"'"))}},{key:"_create",value:function(e,t){var r=e[this._id]||this._uId++,n=l.extend({},e,o({},this._id,r));return Promise.resolve(this.store[r]=n).then(d(t,this.id))}},{key:"create",value:function(e,t){var r=this;return Array.isArray(e)?Promise.all(e.map(function(e){return r._create(e)})):this._create(e,t)}},{key:"_update",value:function(e,t,r){if(e in this.store){var n=this.store[e][this._id];return e=n==e?n:e,t=l.extend({},t,o({},this._id,e)),this.store[e]=t,Promise.resolve(this.store[e]).then(d(r,this.id))}return Promise.reject(new u.NotFound("No record found for id '"+e+"'"))}},{key:"update",value:function(e,t,r){return null===e||Array.isArray(t)?Promise.reject(new u.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")):this._update(e,t,r)}},{key:"_patch",value:function(e,t,r){return e in this.store?(l.extend(this.store[e],l.omit(t,this._id)),Promise.resolve(this.store[e]).then(d(r,this.id))):Promise.reject(new u.NotFound("No record found for id '"+e+"'"))}},{key:"patch",value:function(e,t,r){var n=this;return null===e?this._find(r).then(function(e){return Promise.all(e.data.map(function(e){return n._patch(e[n._id],t,r)}))}):this._patch(e,t,r)}},{key:"_remove",value:function(e,t){if(e in this.store){var r=this.store[e];return delete this.store[e],Promise.resolve(r).then(d(t,this.id))}return Promise.reject(new u.NotFound("No record found for id '"+e+"'"))}},{key:"remove",value:function(e,t){var r=this;return null===e?this._find(t).then(function(e){return Promise.all(e.data.map(function(e){return r._remove(e[r._id],t)}))}):this._remove(e,t)}}]),e}();e.exports=function(e){return new y(e)},e.exports.Service=y},function(e,t,r){"use strict";var n,o;"function"==typeof Symbol&&Symbol.iterator,void 0===(o="function"==typeof(n=function(){var e="function"==typeof Object.getOwnPropertySymbols;return{create:function(){var e=Object.create(this),t="string"==typeof e.__init?e.__init:"init";return"function"==typeof e[t]&&e[t].apply(e,arguments),e},mixin:function(t,r){var n=r||this,o=/\b_super\b/,i=Object.getPrototypeOf(n)||n.prototype,u={},a=t,c=function(e){var t=Object.getOwnPropertyDescriptor(a,e);!u[e]&&t&&(u[e]=t)};do{Object.getOwnPropertyNames(a).forEach(c),e&&Object.getOwnPropertySymbols(a).forEach(c)}while((a=Object.getPrototypeOf(a))&&Object.getPrototypeOf(a));var s=function(t){var r=u[t];"function"==typeof r.value&&o.test(r.value)&&(r.value=function(t,r,n,o){var i="function"==typeof r,u=function(){var e=this._super;this._super=i?r:t[n];var u=o.apply(this,arguments);return this._super=e,u};return i&&e&&Object.getOwnPropertySymbols(r).forEach(function(e){u[e]=r[e]}),u}(i,n[t],t,r.value)),Object.defineProperty(n,t,r)};return Object.keys(u).forEach(s),e&&Object.getOwnPropertySymbols(u).forEach(s),n},extend:function(e,t){return this.mixin(e,Object.create(t||this))},proxy:function(e){var t=this[e],r=Array.prototype.slice.call(arguments,1);return r.unshift(this),t.bind.apply(t,r)}}})?n.apply(t,[]):n)||(e.exports=o)},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(5)("@feathersjs/errors");function i(e,t,r,u,a){var c=void 0,s=void 0,f=void 0;(e=e||"Error")instanceof Error?(s=e.message||"Error",e.errors&&(c=e.errors)):"object"===(void 0===e?"undefined":n(e))?(s=e.message||"Error",a=e):s=e,a&&((f=JSON.parse(JSON.stringify(a))).errors?(c=f.errors,delete f.errors):a.errors&&(c=JSON.parse(JSON.stringify(a.errors)))),this.type="FeathersError",this.name=t,this.message=s,this.code=r,this.className=u,this.data=f,this.errors=c||{},o(this.name+"("+this.code+"): "+this.message),o(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,i):this.stack=(new Error).stack}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function a(e,t){i.call(this,e,"BadRequest",400,"bad-request",t)}function c(e,t){i.call(this,e,"NotAuthenticated",401,"not-authenticated",t)}function s(e,t){i.call(this,e,"PaymentError",402,"payment-error",t)}function f(e,t){i.call(this,e,"Forbidden",403,"forbidden",t)}function l(e,t){i.call(this,e,"NotFound",404,"not-found",t)}function p(e,t){i.call(this,e,"MethodNotAllowed",405,"method-not-allowed",t)}function d(e,t){i.call(this,e,"NotAcceptable",406,"not-acceptable",t)}function y(e,t){i.call(this,e,"Timeout",408,"timeout",t)}function h(e,t){i.call(this,e,"Conflict",409,"conflict",t)}function m(e,t){i.call(this,e,"LengthRequired",411,"length-required",t)}function v(e,t){i.call(this,e,"Unprocessable",422,"unprocessable",t)}function b(e,t){i.call(this,e,"TooManyRequests",429,"too-many-requests",t)}function g(e,t){i.call(this,e,"GeneralError",500,"general-error",t)}function C(e,t){i.call(this,e,"NotImplemented",501,"not-implemented",t)}function w(e,t){i.call(this,e,"BadGateway",502,"bad-gateway",t)}function O(e,t){i.call(this,e,"Unavailable",503,"unavailable",t)}u(i,Error),Object.defineProperty(i.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),u(a,i),u(c,i),u(s,i),u(f,i),u(l,i),u(p,i),u(d,i),u(y,i),u(h,i),u(m,i),u(v,i),u(b,i),u(g,i),u(C,i),u(w,i),u(O,i);var j={FeathersError:i,BadRequest:a,NotAuthenticated:c,PaymentError:s,Forbidden:f,NotFound:l,MethodNotAllowed:p,NotAcceptable:d,Timeout:y,Conflict:h,LengthRequired:m,Unprocessable:v,TooManyRequests:b,GeneralError:g,NotImplemented:C,BadGateway:w,Unavailable:O,400:a,401:c,402:s,403:f,404:l,405:p,406:d,408:y,409:h,411:m,422:v,429:b,500:g,501:C,502:w,503:O};e.exports=Object.assign({convert:function(e){if(!e)return e;var t=j[e.name],r=t?new t(e.message,e.data):new Error(e.message||e);return"object"===(void 0===e?"undefined":n(e))&&Object.assign(r,e),r}},j)},function(e,t,r){"use strict";(function(n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(6)).log=function(){return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++o)}),e.splice(i,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,r(1))},function(e,t,r){"use strict";function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var u=new Array(arguments.length),a=0;a<u.length;a++)u[a]=arguments[a];u[0]=t.coerce(u[0]),"string"!=typeof u[0]&&u.unshift("%O");var c=0;u[0]=u[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var i=u[c];r=o.call(e,i),u.splice(c,1),c--}return r}),t.formatArgs.call(e,u),(n.log||t.log||console.log.bind(console)).apply(e,u)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=1e3,i=6e4,u=36e5,a=24*u;function c(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var r=void 0===e?"undefined":n(e);if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t.long?function(e){return c(e,a,"day")||c(e,u,"hour")||c(e,i,"minute")||c(e,o,"second")||e+" ms"}(e):function(e){return e>=a?Math.round(e/a)+"d":e>=u?Math.round(e/u)+"h":e>=i?Math.round(e/i)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(0),o=r(9),i=r(10),u=r(11);e.exports=Object.assign({},n,i,{hooks:o,filterQuery:u})},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(0)._,u=i.each,a=i.pick,c=t.SKIP="undefined"!=typeof Symbol?Symbol("__feathersSkipHooks"):"__feathersSkipHooks",s=function(e){var t=o(e,2),r=t[0],n=t[1];return{id:r,params:void 0===n?{}:n}},f=function(e){var t=o(e,3),r=t[0],n=t[1],i=t[2];return{id:r,data:n,params:void 0===i?{}:i}};t.converters={find:function(e){var t=o(e,1)[0];return{params:void 0===t?{}:t}},create:function(e){var t=o(e,2),r=t[0],n=t[1];return{data:r,params:void 0===n?{}:n}},get:s,remove:s,update:f,patch:f},t.createHookObject=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.converters[e](r);return Object.defineProperty(o,"toJSON",{value:function(){return a(this,"type","method","path","params","id","data","result","error")}}),Object.assign(o,n,{method:e,get path(){var e=n.app,t=n.service;return t&&e&&e.services?Object.keys(e.services).find(function(r){return e.services[r]===t}):null}})},t.defaultMakeArguments=function(e){var t=[];return void 0!==e.id&&t.push(e.id),e.data&&t.push(e.data),t.push(e.params||{}),t},t.makeArguments=function(e){switch(e.method){case"find":return[e.params];case"get":case"remove":return[e.id,e.params];case"update":case"patch":return[e.id,e.data,e.params];case"create":return[e.data,e.params]}return t.defaultMakeArguments(e)},t.convertHookData=function(e){var t={};return Array.isArray(e)?t={all:e}:"object"!==(void 0===e?"undefined":n(e))?t={all:[e]}:u(e,function(e,r){t[r]=Array.isArray(e)?e:[e]}),t},t.isHookObject=function(e){return"object"===(void 0===e?"undefined":n(e))&&"string"==typeof e.method&&"string"==typeof e.type},t.getHooks=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.__hooks[r][n]||[],u=t.__hooks[r][n]||[];return o?u.concat(i):i.concat(u)},t.processHooks=function(e,r){var n=this,o=r,i=function(e){if(e){if(e===c)return c;if(!t.isHookObject(e))throw new Error(o.type+" hook for '"+o.method+"' method returned invalid hook object");o=e}return o};return e.reduce(function(e,t){var r=t.bind(n);return(e=2===r.length?e.then(function(e){return e===c?c:new Promise(function(t,n){r(e,function(e,r){return e?n(e):t(r)})})}):e.then(function(e){return e===c?c:r(e)})).then(i)},Promise.resolve(o)).then(function(){return o}).catch(function(e){throw e.hook=o,e})},t.enableHooks=function(e,r,n){if("function"==typeof e.hooks)return e;var o={};return n.forEach(function(e){o[e]={}}),Object.defineProperty(e,"__hooks",{value:o}),Object.assign(e,{hooks:function(e){var n=this;return u(e,function(e,o){if(!n.__hooks[o])throw new Error("'"+o+"' is not a valid hook type");var i=t.convertHookData(e);u(i,function(e,t){if("all"!==t&&-1===r.indexOf(t))throw new Error("'"+t+"' is not a valid hook method")}),r.forEach(function(e){var t=n.__hooks[o][e]||(n.__hooks[o][e]=[]);i.all&&t.push.apply(t,i.all),i[e]&&t.push.apply(t,i[e])})}),this}})}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={find:1,get:2,create:2,update:3,patch:3,remove:2};function i(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e}t.validateArguments=function(e,t){if("function"==typeof t[t.length-1])throw new Error("Callbacks are no longer supported. Use Promises or async/await instead.");var r=o[e];if(r&&t.length>r)throw new Error("Too many arguments for '"+e+"' method");var n=t[r-1];if(void 0!==n&&!i(n))throw new Error("Params for '"+e+"' method must be an object");switch(e){case"create":if(!i(t[0]))throw new Error("A data object must be provided to the 'create' method");break;case"get":case"remove":case"update":case"patch":if(void 0===t[0])throw new Error("An id must be provided to the '"+e+"' method");if(("update"===e||"patch"===e)&&!i(t[1]))throw new Error("A data object must be provided to the '"+e+"' method")}return!0}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0)._,i=["$sort","$limit","$skip","$select","$populate"];function u(e){if(void 0!==e)return Math.abs(parseInt(e,10))}e.exports=function(e,t){return{filters:{$sort:function(e){if("object"!==(void 0===e?"undefined":n(e))||Array.isArray(e))return e;var t={};return Object.keys(e).forEach(function(r){t[r]="object"===n(e[r])?e[r]:parseInt(e[r],10)}),t}(e.$sort),$limit:function(e,t){if(t&&t.default){var r="number"==typeof e?e:t.default,n="number"==typeof t.max?t.max:Number.MAX_VALUE;return Math.min(r,n)}return e}(u(e.$limit),t),$skip:u(e.$skip),$select:e.$select,$populate:e.$populate},query:o.omit.apply(o,[e].concat(i))}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function r(e){return"function"==typeof e}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date?e.getTime():o(e)?e.map(i):e&&"function"==typeof e.toJSON?e.toJSON():e}function u(e,t){return r(e.get)?e.get(t):e[t]}function a(e){return function(t,r){if(!o(r)||!r.length)return e(t,r);for(var n=0,i=r.length;n<i;n++)if(e(t,u(r,n)))return!0;return!1}}function c(e,t,r,n){return e.v(e.a,t,r,n)}var s={$eq:a(function(e,t){return e(t)}),$ne:function(e){return function(t,r){if(!o(r)||!r.length)return e(t,r);for(var n=0,i=r.length;n<i;n++)if(!e(t,u(r,n)))return!1;return!0}}(function(e,t){return!e(t)}),$gt:a(function(e,t){return v.compare(i(t),e)>0}),$gte:a(function(e,t){return v.compare(i(t),e)>=0}),$lt:a(function(e,t){return v.compare(i(t),e)<0}),$lte:a(function(e,t){return v.compare(i(t),e)<=0}),$mod:a(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array)){var r=i(t);if(r===t&&"object"===(void 0===t?"undefined":n(t)))for(a=e.length;a--;)if(String(e[a])===String(t)&&"[object Object]"!==String(t))return!0;if(void 0===r)for(a=e.length;a--;)if(null==e[a])return!0;for(a=e.length;a--;){var o=c(m(u(e,a),void 0),t,a,e);if(o&&"[object Object]"!==String(o)&&"[object Object]"!==String(t))return!0}return!!~e.indexOf(r)}for(var a=t.length;a--;)if(~e.indexOf(i(u(t,a))))return!0;return!1},$nin:function(e,t,r,n){return!s.$in(e,t,r,n)},$not:function(e,t,r,n){return!c(e,t,r,n)},$type:function(e,t){return void 0!=t&&(t instanceof e||t.constructor==e)},$all:function(e,t,r,n){return s.$and(e,t,r,n)},$size:function(e,t){return!!t&&e===t.length},$or:function(e,t,r,n){for(var o=0,i=e.length;o<i;o++)if(c(u(e,o),t,r,n))return!0;return!1},$nor:function(e,t,r,n){return!s.$or(e,t,r,n)},$and:function(e,t,r,n){for(var o=0,i=e.length;o<i;o++)if(!c(u(e,o),t,r,n))return!1;return!0},$regex:a(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t,r,n){return e.call(t,t,r,n)},$elemMatch:function(e,t,r,n){return o(t)?!!~l(t,e):c(e,t,r,n)},$exists:function(e,t,r,n){return n.hasOwnProperty(r)===e}},f={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:o(e)&&!e.length?function(e){return o(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===v.compare(i(t),e)}},$ne:function(e){return f.$eq(e)},$and:function(e){return e.map(h)},$all:function(e){return f.$and(e)},$or:function(e){return e.map(h)},$nor:function(e){return e.map(h)},$not:function(e){return h(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return h(e)},$exists:function(e){return!!e}};function l(e,t){for(var r=0;r<e.length;r++)if(u(e,r),c(t,u(e,r)))return r;return-1}function p(e,t){return{a:e,v:t}}function d(e,t){var r=[];if(function e(t,r,n,i,a){if(n!==r.length&&void 0!=t){var c=u(r,n);if(o(t)&&isNaN(Number(c)))for(var s=0,f=t.length;s<f;s++)e(u(t,s),r,n,t,a);else e(u(t,c),r,n+1,t,a)}else a.push([t,r[n-1],i])}(t,e.k,0,t,r),1===r.length){var n=r[0];return c(e.nv,n[0],n[1],n[2])}for(var i=e&&e.q&&void 0!==e.q.$ne,a=i,s=0;s<r.length;s++){var f=r[s],l=c(e.nv,f[0],f[1],f[2]);i?a&=l:a|=l}return a}function y(e,t,r){return{a:{k:e,nv:t,q:r},v:d}}function h(e){(e=i(e))&&function(e){return e&&e.constructor===Object}(e)||(e={$eq:e});var t=[];for(var r in e){var n=e[r];if("$options"!==r)if(s[r])f[r]&&(n=f[r](n,e)),t.push(p(i(n),s[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);t.push(y(r.split("."),h(n),n))}}return 1===t.length?t[0]:p(t,s.$and)}function m(e,t){var r=h(e);return t&&(r={a:r,v:function(e,r,n,o){return c(e,t(r),n,o)}}),r}function v(e,t,n){r(t)&&(n=t,t=void 0);var o=m(e,n);function i(e,t,r){return c(o,e,t,r)}return t?t.filter(i):i}v.use=function(e){if(r(e))return e(v);for(var t in e)36===t.charCodeAt(0)&&(s[t]=e[t])},v.indexOf=function(e,t,r){return l(t,m(e,r))},v.compare=function(e,t){if(e===t)return 0;if((void 0===e?"undefined":n(e))===(void 0===t?"undefined":n(t))){if(e>t)return 1;if(e<t)return-1}},void 0!==e&&void 0!==e.exports&&(Object.defineProperty(t,"__esModule",{value:!0}),e.exports=v,t.default=e.exports.default=v),"undefined"!=typeof window&&(window.sift=v)}()}])});